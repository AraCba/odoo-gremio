<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <menuitem name="Accion social" id="base.menu_docentes_accion_social" sequence="2" parent="base.menu_docentes"/>

    <!--record id="view_res_partner_docentes_filter" model="ir.ui.view">
        <field name="name">Solicitudes Search</field>
        <field name="model">docentes.solicitudes</field>
        <field name="arch" type="xml">
            <search string="Solicitudes">
                <field name="name" filter_domain="[('name','in',self.padres.name)]" />
                <field name="legajo" filter_domain="[('legajo','=',self)]" string="Legajo"/>
             </search>
        </field>
    </record-->

    <!-- Vista de lista -->
    <record model="ir.ui.view" id="solicitudes_tree_view">
        <field name="name">Solicitudes</field>
        <field name="model">docentes.solicitudes</field>
        <field name="arch" type="xml">
            <tree string="Solicitudes">
                <field name="docente"/>
                <field name="state"/>
                <field name="tipo_solicitud"/>
                <field name="fecha_sol"/>
                <field name="fecha_ult_estado"/>
                <field name="doc_completa"/>
            </tree>
        </field>
    </record>

    <!-- Vista de formulario -->
    <record model="ir.ui.view" id="solicitudes_form_view">
        <field name="name">Solicitudes</field>
        <field name="model">docentes.solicitudes</field>
        <field name="arch" type="xml">
            <form string="Solicitudes">
                <header>
                    <button name="autorizar" type="object" states="sol" string="Autorizar" class="oe_highlight"/>
                    <button name="rechazar" type="object" states="sol" string="Rechazar"/>
                    <button name="finalizar" type="object" states="aut" string="Finalizar" class="oe_highlight"/>
                    <button name="cancelar" type="object" states="sol,aut,fin" string="Cancelar" />
                    <field name="state" widget="statusbar" statusbar_visible="sol,aut,rec,fin,can" />
                </header>

                <sheet>
                    <group>
                        <field name="mostrar_bolsones" invisible="1" />
                        <field name="mostrar_subsidios" invisible="1" />
                        <field name="tipo_solicitud" attrs="{'readonly': [('state', 'not in', ['nue','sol'])]}" domain="[('activo','=',True)]"/>
                        <field name="docente" attrs="{'readonly': [('state', 'not in', ['nue','sol'])]}"/>                                 
                        <field name="fecha_sol" attrs="{'readonly': [('state', 'not in', ['nue','sol'])]}"/>
                        <field name="fecha_ult_estado" attrs="{'readonly': [('state', 'not in', ['nue','sol'])]}"/>
                        <field name="doc_completa" attrs="{'readonly': [('state', 'not in', ['nue','sol'])]}"/>
                        <field name="expediente" attrs="{'readonly': [('state', 'not in', ['nue','sol'])]}"/>
                        <field name="resolucion" attrs="{'readonly': [('state', 'not in', ['nue','sol'])]}"/>
                        <field name="observaciones" attrs="{'readonly': [('state', 'not in', ['nue','sol'])]}"/>
                        <field name="responsable" attrs="{'readonly': [('state', 'in', ['can','rec'])]}"/>
                    </group>

                    <!-- context="{'partner_id': docente.id }"-->
                    <notebook position="inside">
                        <page string="Bolsones" attrs="{'invisible': [('mostrar_bolsones','=', False)]}">
                            <field name="bolsones" nolabel="1" widget="one2many_list" mode="tree,kanban"
                                attrs="{'readonly': [('state', 'not in', ['nue','sol'])]}"> 
                                <tree string="bolsones"  editable="bottom">
                                    <field name="menor" domain="[('verificado','=',True)]" />
                                    <field name="nivel"/>
                                    <field name="entregado"/>
                                </tree>
                            </field>
                        </page>

                        <page string="Subsidios" attrs="{'invisible': [('mostrar_subsidios','=', False)]}">
                            <group>
                                <field name="monto_sol" attrs="{'readonly': [('state', '!=', 'nue')]}"/>
                                <field name="monto_aut" attrs="{'readonly': [('state', '!=', 'sol')]}"/>
                                <field name="monto_ren" attrs="{'readonly': [('state', '!=', 'aut')]}"/>
                                <field name="monto_ren" attrs="{'readonly': [('state', '!=', 'aut')]}"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_solicitudes">
        <field name="name">Solicitudes</field>
        <field name="res_model">docentes.solicitudes</field>
        <!--field name="domain">[('estado','in',['sol', 'aut','rec'])]</field>
        <field name="search_view_id" ref="solicitudes_view_filter"/-->
    </record>

    <menuitem name="Solicitudes" id="menu_docentes_solicitudes" parent="base.menu_docentes_accion_social" groups="base.group_gestion_solicitudes" sequence="1" action="action_solicitudes" />

</odoo>